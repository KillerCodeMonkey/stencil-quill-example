import{r as t,h as i,g as s}from"./p-d6c79425.js";const e=".ql-container.quill-view.sc-quill-view{border:0}";const n=e;const h=class{constructor(i){t(this,i);this.format="html";this.content=undefined;this.debug="warn";this.formats=undefined;this.modules=undefined;this.strict=true;this.styles="{}";this.theme="snow";this.defaultEmptyValue=null}setEditorContent(t){if(!this.quillEditor){return null}if(this.format==="html"){const i=this.quillEditor.clipboard.convert(t);this.quillEditor.setContents(i,"api")}else if(this.format==="text"){this.quillEditor.setText(t,"api")}else if(this.format==="json"){try{this.quillEditor.setContents(JSON.parse(t),"api")}catch(i){this.quillEditor.setText(t,"api")}}else{this.quillEditor.setText(t,"api")}}getEditorContent(){if(!this.quillEditor){return null}const t=this.quillEditor.getText();const i=this.quillEditor.getContents();let s=this.quillEditor.getSemanticHTML();if(this.isEmptyValue(s)){s=this.defaultEmptyValue}if(this.format==="html"){return s}else if(this.format==="text"){return t}else if(this.format==="json"){try{return JSON.stringify(i)}catch(i){return t}}else{return t}}componentDidLoad(){let t=this.modules?JSON.parse(this.modules):{toolbar:false};if(t.toolbar){t.toolbar=false}this.quillEditor=new Quill(this.editorElement,{debug:this.debug,modules:t,readOnly:true,theme:this.theme||"snow",formats:this.formats,strict:this.strict});if(this.styles){const t=JSON.parse(this.styles);Object.keys(t).forEach((i=>{this.editorElement.style.setProperty(i,t[i])}))}this.editorElement.classList.add("quill-view");if(this.content){this.setEditorContent(this.content);this.quillEditor["history"].clear()}}updateStyle(t,i){if(!this.editorElement){return}if(i){const t=JSON.parse(i);Object.keys(t).forEach((t=>{this.editorElement.style.setProperty(t,"")}))}if(t){const i=JSON.parse(t);Object.keys(i).forEach((t=>{this.editorElement.style.setProperty(t,i[t])}))}}updateContent(t){if(!this.quillEditor){return null}const i=this.getEditorContent();if(["text","html","json"].indexOf(this.format)>-1&&t===i){return null}else{let s=false;try{const e=JSON.stringify(t);s=JSON.stringify(i)!==e}catch(t){return null}if(!s){return null}}this.setEditorContent(t)}isEmptyValue(t){return t==="<p></p>"||t==="<div></div>"||t==="<p><br></p>"||t==="<div><br></div>"}render(){return i("div",{key:"b5d966c20180db2d28ee0de2ab8547aa50341bc3","quill-element":true,ref:t=>{this.editorElement=t}})}get wrapperElement(){return s(this)}static get watchers(){return{styles:["updateStyle"],content:["updateContent"]}}};h.style=n;export{h as quill_view};
//# sourceMappingURL=p-20166fcc.entry.js.map